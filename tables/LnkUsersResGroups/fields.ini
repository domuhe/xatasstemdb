; replacing default sql query for table (select * from LnkUsersResGroups) with:
; single grafted field:
;__sql__ = "Select l.*, r.ResGroupDep from ResearchGroups r left join LnkUsersResGroups l on l.idResGroup=r.idResGroup"

; two grafted fields:
__sql__ = "Select l.*, r.ResGroupName, r.ResGroupDep, i.InstituteName, 
concat(a.surname,', ',a.name) as UserName,
concat(i.InstituteName,'/',r.ResGroupDep,'/',r.ResGroupName) as InsDepGrp 
from ResearchGroups r 
left join LnkUsersResGroups l on l.idResGroup=r.idResGroup 
left join Institutes i on r.ResGroupInst=i.idInstitute
left join authors a on l.idUser=a.idauthor
order by UserName"


;; LEFT TO DO: find out how to choose what field is shown as title line above Detail view

[idUserGroup]
	widget:label = "UGID"
	order = 1
[idUser]
	widget:label = "User Name"
	widget:type = select
	vocabulary = SelectAuthor
	order = 2
[idResGroup]
	widget:label = "Group"
	widget:type = select
	;vocabulary = ResearchGroups
	vocabulary = SelectGroup
	;widget:type = lookup
	;widget:table = ResearchGroups
	order = 10
[ResGroupName]
	;grafted
	widget:label = "_Group"
	order = 3
[ResGroupDep]
	;grafted
 	widget:label = "_Department"	
	order = 4
[InstituteName]
	;grafted
	widget:label = "_Institution"
	order = 5
[LnkUsersResGroupsIsStudent]
	widget:label = "Student"
	widget:type = select
	vocabulary = IsStudent
	order = 6
[LnkUsersResGroupsCreationDate]
	widget:label = "Creation Date"
	order = 7
[LnkUsersResGroupsLastmod]
	widget:label = "Lastmodified"
	order = 8
[InsDepGrp]
	;grafted
	order = 9
	widget:type = select
[UserName]
	;grafted for getTitle in php file
	widget:label = "_User Name"
	

